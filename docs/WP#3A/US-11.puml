@startuml
title Schedule Appointment - Sequence Diagram (Administrator)

actor Administrator

participant "Consultations Service\n(Spring Boot)" as Consultations
participant "Doctors Service\n(Spring Boot)" as Doctors
participant "Clients Service\n(Spring Boot)" as Clients
database "H2 Database\n(Consultations)" as DB_Consultations
database "H2 Database\n(Doctors)" as DB_Doctors
database "H2 Database\n(Clients)" as DB_Clients

Administrator -> Consultations : POST /appointments\n{patientId, doctorId, date, time, type}

Consultations -> Clients : GET /clients/{patientId}
Clients -> DB_Clients : SELECT * FROM patients WHERE id=patientId
DB_Clients --> Clients : Patient data
Clients --> Consultations : 200 OK\n(Patient details)

Consultations -> Doctors : GET /doctors/{doctorId}
Doctors -> DB_Doctors : SELECT * FROM doctors WHERE id=doctorId
DB_Doctors --> Doctors : Doctor data
Doctors --> Consultations : 200 OK\n(Doctor details)

Consultations -> DB_Consultations : INSERT INTO consultations\n(patientId, doctorId, date, time, type, status="SCHEDULED")
DB_Consultations --> Consultations : Confirmation (appointmentId)

Consultations --> Administrator : 201 Created\n{appointmentId, patient, doctor, date, time, type, status="SCHEDULED"}

@enduml